# Instructions for running scripts

This folder contains six R scripts and two folders: ```data``` and ```figures```, as well as this README file.


## Scripts

Each script runs independently of the others, and is commented. Briefly:

| Script  | Description | Sections | Figures |
| ------------- |:-------------:|:-------------:|:-------------:|
| ```aspre_analysis.R```      | Analyses related to the ASPRE risk score | 7 | 4 |
|```comparison_pipeline.R``` | Comparative analysis of emulation and parametric algorithms for OHS estimation | 6.2 | 3 |
| ```emulation_demo.R``` | Demonstration of emulation algorithm | S7 | S4 |
| ```gradients_pipeline.R``` | Computation of gradients of OHS and cost function in simple case| S6 |S2, S3|
| ```sim_system_pipeline.R```| General simulation of a cost function of holdout set size | S8.2 | S5 |
| ```updating_necessity.R```|General simulation showing dominance of the holdout set approach | 6.1 | 2, S1 | 

## Files

| File  | Description |
| ------------- |:-------------:|
| ```data``` | Temporary data and ```sessionInfo()``` files |
|```figures``` | All figures; contains several not used in the manuscript |


## Instructions 

### Working directory

Please run all scripts in R with the working directory set to the base directory (that is, the directory containing the six scripts and two folders above)


### Packages and versions

These scripts use several packages including the custom package ```OptHoldoutSize```, developed as part of this project. All packages are available on the comprehensive R archive network (CRAN).

All scripts will print session information (using the R command ```sessionInfo()```) after necessary packages have been loaded. In order to definitively reproduce results, these should be re-ran on a similar system.

### Temporary data

Some scripts are time-consuming to run in entirety, so they will save temporary data, and the script can be quickly ran again to regenerate plots using the previously-generated temporary data. **All scripts will do this by default**. Pre-generated temporary data is included in the folder ```data```.

To force regeneration of all temporary data, change the flag ```force_redo``` near the top of each file to ```TRUE```. All are set to ```FALSE``` by default.

All simulations use a random seed, specified at the top. These are generated by semi-random key pounding rather than chosen by a system!


### Figures and other output

All figures will be written to PDF files in the folder ```figures```. To turn off this behaviour, change the flag ```save_plot``` near the top of each script to ```FALSE``` and plots will instead be drawn to the R graphics device. 

If plotting to the R graphics device, figures will overplot, rather than all print simultaneously. 

Some scripts print information to the console.
